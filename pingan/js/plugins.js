!function(t){var e=function(){return new XMLHttpRequest},a={ajaxOptions:{type:"GET",url:"",timeout:6e4,data:"",dataType:"text",complete:function(){},success:function(){},error:function(){}},ajaxSetup:function(e){e=e||{},t.ajaxOptions=t.extend(t.ajaxOptions,e)},setupOptions:function(e){return e=e||{},t.extend(t.ajaxOptions,e)},serialize:function(e){var a,n=[],s=e.length;if(t.isArray(e))for(var i=0;s>i;i+=1)a=e[i],n.push(encodeURIComponent(a.name)+"="+encodeURIComponent(a.value));else if(t.isPlainObject(e))for(var i in e)n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.join("&")},httpData:function(t,e){e&&(e=e.toLowerCase());var a=(t.getResponseHeader("content-type"),null==e||"xml"===e?t.responseXML:t.responseText);return"script"===e&&eval.call(window,a),a},ajax:function(a){a=t.setupOptions(a);var n=e(),s=a.url,i=a.type.toUpperCase(),o=a.data;"GET"===i&&o&&(s=s+"?"+t.serialize(o)),clearTimeout(n.timer);var r=!1;a.timeout&&(n.timer=setTimeout(function(){r=!0},a.timeout)),n.open(i,s,!0),"POST"===i&&n.setRequestHeader("Content-type","text/plain:charset=UTF-8"),n.onreadystatechange=function(){if(4==n.readyState&&!r){var e=n.status;e>=200&&300>e||304===e?a.success&&a.success(t.httpData(n,a.dataType)):a.error&&a.error(n),a.complete&&a.complete(n),n=null}},"GET"===i?n.send(null):n.send(o)},get:function(e){t.ajax(t.extend(e,{type:"GET"}))},post:function(e){t.ajax(t.extend(e,{type:"POST"}))}};t.each(a,function(e,a){t[e]=a}),t.fn.serialize=function(){var e=this.get(0).tagName.toLowerCase(),a={};return"form"==e?(this.find("[name]").each(function(e,n){var s=t(n);a[s.attr("name")]=s.val()}),t.serialize(a)):void console.error("只能序列化表单")}}(Zepto),function(t){var e,a="[data-toggle=dropdown]",n=t(window).height(),s=function(t,e){t.children("li").removeClass("on").eq(e).addClass("on")},i=function(t,e){t.val(e)},o=function(){var a=t("form input[type=submit], form .submit, form #submit"),s=20,i=n-e-s;if(a.length>0){var o=t(a).offset().top;i>o&&(i=o-4)}p.animate({top:i+"px"},200,"ease")},r=function(){p.animate({top:g},200,"ease-out")},u=function(a){var a=t(a);if(a.data("src"))c=a;else if(c=a.siblings("[data-src]"),0==c.length)return!1;var n=c.attr("id"),s=1;m.empty().attr({p:"#"+n,i:s});var i="";c.children("option").each(function(e,a){var n=t(a).text();i+=e==s?"<li class='on'>"+n+"</li>":"<li>"+n+"</li>"}),m.html(i),e=p.height(),o()},l=function(t){t.preventDefault();var e=m.attr("i");e--,0>=e&&(e=0),m.attr("i",e),s(m,e)},d=function(t){t.preventDefault();var e=m.children("li"),a=m.attr("i");a++,a>=e.length-1&&(a=e.length-1),m.attr("i",a),s(m,a)},c=function(){var e=t(m.attr("p")),a=m.attr("i");i(e,a),"#idType"===m.attr("p")&&0===a?t("#idNo").data("validate","idNo"):t("#idNo").data("validate","No"),t("#idNo").removeClass("valid dirty invalid").addClass("empty").val("").data("validate-success","").data("validate-fail",""),r()},v=t(a);if(v.length>0){var f='<div class="dropdown"> <div class="finish"> <div class="container"> <button class="icon icon-circle close">&lsaquo;</button> <button class="finished">完成</button> </div> </div> <ul class="choose"></ul> </div>',p=t(f).appendTo("body"),g=(t("input[type]"),p.css("top")),m=p.find(".choose"),h=p.find(".close"),y=p.find(".finished");v.on("tap",function(t){t.preventDefault(),u(this)}),p.on("swipeUp",l),p.on("swipeDown",d),h.on("tap",r),y.on("tap",c)}}(Zepto),function(t){var e="[data-storage]",a=t(e),n=function(t,e){sessionStorage&&sessionStorage.setItem(t,e)},s=function(t){return sessionStorage?sessionStorage.getItem(t):void 0};t.setItem=n,t.getItem=s,t.getItems=function(){for(var t={},e=sessionStorage.length-1;e>=0;e--){var a=sessionStorage.key(e),n=sessionStorage.getItem(a);t[a]=n}return t};var i=function(){a.each(function(e,a){n(t(a).data("storage"),t(a).val())})},o=function(){a.each(function(e,a){var n=s(t(a).data("storage"));null!==n&&void 0!==n&&t(a).val(n)})};a.length>0&&o(),window.onunload=function(){a.length>0&&i()}}(Zepto),function(t){var e={No:function(t){var e=/^\d{1,}$/,a="为至少一位的纯数字！";return e.test(t)?{status:"success",msg:t}:{status:"fail",msg:a}},cnName:function(t){return t=t.replace(/[^\u4E00-\u9FA5]/g,""),msg="请填写中文姓名！",t.length>=2?{status:"success",msg:t}:{status:"fail",msg:msg}},idNo:function(t){var e,a,n,s=t.length,i=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{2})(\d{1})([0-9]|X)$/i,o=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{2})(\d{1})$/;if(!/^\d{1,}$/.test(t))return{status:"fail",msg:"身份证号码为15位或18位纯数字！"};if(15!==s&&18!==s)return{status:"fail",msg:"身份证号码只能为15位或18位数字！"};15==s&&(e=t.match(o)),18==s&&(e=t.match(i));var r=e[2],u=e[3],l=e[4],n=e[6];return parseFloat(u)>12||parseFloat(l)>31?{status:"fail",msg:"身份证号码格式错误！"}:(a=r+"-"+u+"-"+l,n=e[6],15==s&&(a="19"+a),{status:"success",msg:{dob:a,gender:n}})},phoneNo:function(t){var e=/^1[0-9]\d{9}$/,a="电话号码格式错误！";return e.test(t)?{status:"success",msg:t}:{status:"fail",msg:a}},validateNo:function(t){var e=/^\d{2,}$/,a="手机验证码格式错误！";return e.test(t)?{status:"success",msg:t}:{status:"fail",msg:a}},bankNo:function(t){var e="卡号格式错误！";if(""==t)return{status:"fail",msg:e};for(var a=t.substring(t.length-1,t.length),n=t.substring(0,t.length-1),s=(new Array,0),i=n.length-1,o=0;i>=0;i--,o++){var r=parseInt(n[i]);o%2==0&&(r*=2,r=parseInt(r/10)+parseInt(r%10)),s+=parseInt(r)}var u=parseInt(s)%10==0?0:10-parseInt(s)%10;return a==u?{status:"success",msg:t}:{status:"fail",msg:e}},bankPwd:function(t){var e=/^\d{6}$/,a="银行卡密码为6位纯数字";return e.test(t)?{status:"success",msg:t}:{status:"fail",msg:a}}},a=function(t){var e=t.val().replace(/\s/gi,"");""!==e?t.removeClass("empty").addClass("dirty"):t.addClass("empty").removeClass("dirty")},n="input";t("[data-validate]").each(function(s,i){var i=t(i),o=t(i).data("validate");e[o]&&a(i);var r=t("[data-validate=gender]"),u=t("[data-validate=dob]"),l=function(n){n.preventDefault();var s=t(this),i=s.val().replace(/\s/gi,"");o=s.data("validate");var l;a(s),o&&e[o]&&(l=e[o](i),"success"==l.status?(s.addClass("valid").removeClass("invalid"),"idNo"==o?(r.length>0&&r.val(1&l.msg.gender),u.length>0&&u.val(l.msg.dob),s.data("validate-success",i)):s.data("validate-success",l.msg)):(s.addClass("invalid").removeClass("valid"),s.data("validate-fail",l.msg),r.length>0&&r.val(0),u.length>0&&u.val("")))};i.on(n,l)})}(Zepto);