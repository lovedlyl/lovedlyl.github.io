!function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return o?o+e:e.toLowerCase()}var o,a,r,s,u,c,l,d,f,p,h="",g={Webkit:"webkit",Moz:"",O:"o"},m=window.document,v=m.createElement("div"),$=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,w={};e.each(g,function(e,n){return v.style[e+"TransitionProperty"]!==t?(h="-"+e.toLowerCase()+"-",o=n,!1):void 0}),a=h+"transform",w[r=h+"transition-property"]=w[s=h+"transition-duration"]=w[c=h+"transition-delay"]=w[u=h+"transition-timing-function"]=w[l=h+"animation-name"]=w[d=h+"animation-duration"]=w[p=h+"animation-delay"]=w[f=h+"animation-timing-function"]="",e.fx={off:o===t&&v.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,o,a,r){return e.isFunction(i)&&(a=i,o=t,i=t),e.isFunction(o)&&(a=o,o=t),e.isPlainObject(i)&&(o=i.easing,a=i.complete,r=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(n,i,o,a,r)},e.fn.anim=function(i,o,h,g,m){var v,y,b,T={},x="",C=this,M=e.fx.transitionEnd,P=!1;if(o===t&&(o=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(o=0),"string"==typeof i)T[l]=i,T[d]=o+"s",T[p]=m+"s",T[f]=h||"linear",M=e.fx.animationEnd;else{y=[];for(v in i)$.test(v)?x+=v+"("+i[v]+") ":(T[v]=i[v],y.push(n(v)));x&&(T[a]=x,y.push(a)),o>0&&"object"==typeof i&&(T[r]=y.join(", "),T[s]=o+"s",T[c]=m+"s",T[u]=h||"linear")}return b=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(M,b)}else e(this).unbind(M,b);P=!0,e(this).css(w),g&&g.call(this)},o>0&&(this.bind(M,b),setTimeout(function(){P||b.call(C)},1e3*(o+m)+25)),this.size()&&this.get(0).clientLeft,this.css(T),0>=o&&setTimeout(function(){C.each(function(){b.call(this)})},0),this},v=null}(Zepto),$(function(){var e=($("form"),$("#cardType")),t=$("#cardNum"),n=($("#cardPwd"),$("#phoneNum")),i=$("#vcode"),o=$("#name"),a=$("#vCardType"),r=$("#vCardNum"),s=$("#gender"),u=$("#dateOfBirth"),c=[e,t,n,o,a,r,s,u],l=[];$.each(c,function(e,t){0!=t.length&&l.push(t)});var d=function(e,t){e.children("li").removeClass("on").eq(t).addClass("on")},f=function(){sessionStorage&&$.each(l,function(e,t){var n=t[0].tagName.toLowerCase(),i=t.selector.slice(1);if("input"==n){var o=sessionStorage[i];o&&t.val(o)}if("ul"==n){var a=sessionStorage[i];void 0!==a&&d(t,a)}})};f();var p=function(){sessionStorage&&$.each(l,function(e,t){var n=t[0].tagName.toLowerCase(),i=t.selector.slice(1);if("input"==n){var o=t.val();sessionStorage[i]=o}if("ul"==n){var a=t.find("li.on").index();console.log(a),sessionStorage[i]=a}})};!function(){var e=function(e){p(),history.go(-1)};$(".header .icon-circle").on("tap",e)}(),function(){var e=$(".select .icon, .select ul"),t=$(".choose"),n=$(".modal"),i=n.css("top"),o=$("input[type=submit]").height(),a=$(".modal .icon-circle"),r=$(".modal .finished"),s=function(e){var n;"ul"==$(this)[0].tagName.toLowerCase()&&(n=$(this)),"span"==$(this)[0].tagName.toLowerCase()&&(n=$(this).siblings("ul"));var i=n.attr("id"),o=1;t.empty().attr({p:"#"+i,i:o}),n.children("li").clone().removeClass("on").appendTo(t).eq(o).addClass("on"),l()},u=function(e){e.preventDefault();var n=t.attr("i");n--,0>=n&&(n=0),t.attr("i",n),d(t,n)},c=function(e){e.preventDefault();var n=t.children("li"),i=t.attr("i");i++,i>=n.length-1&&(i=n.length-1),t.attr("i",i),d(t,i)},l=function(){n.animate({top:-(o+20)+"px"},200,"ease")},f=function(){n.animate({top:i},200,"ease-out")},p=function(e){var n=$(t.attr("p")),i=t.attr("i");d(n,i),f()};e.on("tap",s),n.on("swipeUp",u),n.on("swipeDown",c),a.on("tap",f),r.on("tap",p)}(),function(){var t=function(e){return e=e.replace(/[^\u4E00-\u9FA5]/g,""),e.length<2?!1:e},o=function(e){var t=/^\d{1,}$/;return t.test(e)},r=function(e){var t,n,i,a=e.length,r=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{2})(\d{1})([0-9]|X)$/i,s=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{2})(\d{1})$/;return o(e)?15!==a&&18!==a?!1:(15==a&&(t=e.match(s)),18==a&&(t=e.match(r)),n=t[2]+"-"+t[3]+"-"+t[4],i=t[6],15==a&&(n="19"+n),{dob:n,gender:i}):!1},c=function(e){for(var t=e.substring(e.length-1,e.length),n=e.substring(0,e.length-1),i=(new Array,0),o=n.length-1,a=0;o>=0;o--,a++){var r=parseInt(n[o]);a%2==0&&(r*=2,r=parseInt(r/10)+parseInt(r%10)),i+=parseInt(r)}var s=parseInt(i)%10==0?0:10-parseInt(i)%10;return t==s?e:!1},f=function(e){var t=/^\d{6}$/;return t.test(e)?e:!1},p=function(e){var t=/^1[0-9]\d{9}$/;return t.test(e)?e:!1},h=function(e){var t=/^\d{6}$/;return t.test(e)?e:!1},g=function(e){return c(e)},m=function(e){return f(e)},v=-1!==$.inArray(e,l),w=-1!==$.inArray(n,l),y=-1!==$.inArray(a,l),b=$(".warning"),T=$("input"),x=($("input[required]"),function(n){n.preventDefault();var i,l=$(this),v=l.val().replace(/\s/gi,""),w=l.attr("id"),y=function(e){b.text(e)},T=function(){b.text("")},x=function(e){d(s,1&e.gender),u.val(e.dob)};if(""==v)return i=l.siblings("label").text()+"不能为空！",y(i),!1;switch(T(),w){case"phoneNum":p(v)||y("请填入11位正确格式电话号码！");break;case"vcode":h(v)||y("验证码有误！");break;case"cardNum":0!=e.children("li.on").index()||c(v)||y("银行卡格式不正确！"),1!=e.children("li.on").index()||g(v)||y("一账通帐号格式不正确！");break;case"cardPwd":0!=e.children("li.on").index()||f(v)||y("银行密码卡格式不正确！"),1!=e.children("li.on").index()||m(v)||y("一账通密码格式不正确！");break;case"name":t(v)||y("请输入真实中文姓名！");break;case"vCardNum":if(0==a.children("li.on").index()){var C=r(v);C&&x(C)}o(v)||y("证件号码格式有误！");break;case"dateOfBirth":""==v&&y("请选择出身日期！");break;default:T()}});if(T.on("blur",x),v&&console.log("account.html"),w){console.log("phone.html");p(n.val()),h(i.val)}y&&console.log("validate.html")}()}),function(e){function t(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){l=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){l&&clearTimeout(l),l=null}function o(){s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),l&&clearTimeout(l),s=u=c=l=null,f={}}function a(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function r(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,u,c,l,d,f={},p=750;e(document).ready(function(){var h,g,m,v,$=0,w=0;"MSGesture"in window&&(d=new MSGesture,d.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(f.el.trigger("swipe"),f.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(v=r(t,"down"))&&!a(t)||(m=v?t:t.touches[0],t.touches&&1===t.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),h=Date.now(),g=h-(f.last||h),f.el=e("tagName"in m.target?m.target:m.target.parentNode),s&&clearTimeout(s),f.x1=m.pageX,f.y1=m.pageY,g>0&&250>=g&&(f.isDoubleTap=!0),f.last=h,l=setTimeout(n,p),d&&v&&d.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(v=r(e,"move"))&&!a(e)||(m=v?e:e.touches[0],i(),f.x2=m.pageX,f.y2=m.pageY,$+=Math.abs(f.x1-f.x2),w+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp pointerup",function(n){(v=r(n,"up"))&&!a(n)||(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?c=setTimeout(function(){f.el.trigger("swipe"),f.el.trigger("swipe"+t(f.x1,f.x2,f.y1,f.y2)),f={}},0):"last"in f&&(30>$&&30>w?u=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=o,f.el.trigger(t),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):s=setTimeout(function(){s=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),$=w=0)}).on("touchcancel MSPointerCancel pointercancel",o),e(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);