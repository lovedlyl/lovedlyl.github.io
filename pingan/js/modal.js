!function(t,a){var e,n=t("input[type]"),o=t(".modal"),i=o.css("top"),r=t(window).height(),s=t(".choose"),l=t(".modal .close"),p=t(".modal .finished"),f=function(t,a){t.children("li").removeClass("on").eq(a).addClass("on").parent()},c=function(n){var n=n||{},i=n.space;i=i==a?0:parseFloat(i);var s=t(n.mock),l=r-e-i;if(s.length>0){var p=t(s).offset().top;l>p&&(l=p-4)}o.animate({top:l+"px"},200,"ease")},u=function(){o.animate({top:i},200,"ease-out")},d=function(a,n){var i;"ul"==t(a)[0].tagName.toLowerCase()&&(i=t(a)),"span"==t(a)[0].tagName.toLowerCase()&&(i=t(a).siblings("ul"));var r=i.attr("id"),l=1;s.empty().attr({p:"#"+r,i:l}),i.children("li").clone().removeClass("on").appendTo(s).eq(l).addClass("on"),e=o.height(),c(n)},v=function(t){t.preventDefault();var a=s.attr("i");a--,0>=a&&(a=0),s.attr("i",a),f(s,a)},h=function(t){t.preventDefault();var a=s.children("li"),e=s.attr("i");e++,e>=a.length-1&&(e=a.length-1),s.attr("i",e),f(s,e)},m=function(a){var e=function(t,a){t.siblings(".tooltip").find(".info").text(a),t.get(0).focus()},n=t(s.attr("p")),o=s.attr("i");f(n,o);var i=n.parents(".form-group").next(".form-group").find("input"),r=i.attr("id"),l={};switch(r){case"vCardNum":l=0==o?i.validate("idNo"):i.validate("No");break;case"cardNum":l=0==o?i.validate("bankNo"):i.validate("No")}l.fail&&e(i,l.fail),u()};t.fn.modal=function(t){return this.on("tap",function(a){a.preventDefault(),d(this,t)}),o.on("swipeUp",v),o.on("swipeDown",h),l.on("tap",u),p.on("tap",m),n.focus(u),this}}(Zepto);