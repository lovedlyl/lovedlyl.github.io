!function(t,a){var n,e=t("input[type]"),o=t(".modal"),i=o.css("top"),r=t(window).height(),s=t(".choose"),l=t(".modal .close"),p=t(".modal .finished"),f=function(t,a){t.children("li").removeClass("on").eq(a).addClass("on").parent()},c=function(e){var e=e||{},i=e.space;i=i==a?0:parseFloat(i);var s=t(e.mock),l=r-n-i;if(s.length>0){var p=t(s).offset().top;l>p&&(l=p-4)}o.animate({top:l+"px"},200,"ease")},d=function(){o.animate({top:i},200,"ease-out")},u=function(a,e){var i,a=t(a);"ul"==a.get(0).tagName.toLowerCase()&&(i=a),a.hasClass("down")&&(i=a.siblings("ul"));var r=i.attr("id"),l=1;s.empty().attr({p:"#"+r,i:l}),i.children("li").clone().removeClass("on").appendTo(s).eq(l).addClass("on"),n=o.height(),c(e)},v=function(t){t.preventDefault();var a=s.attr("i");a--,0>=a&&(a=0),s.attr("i",a),f(s,a)},h=function(t){t.preventDefault();var a=s.children("li"),n=s.attr("i");n++,n>=a.length-1&&(n=a.length-1),s.attr("i",n),f(s,n)},m=function(a){var n=function(t,a){t.siblings(".tooltip").find(".info").text(a),t.get(0).focus()},e=t(s.attr("p")),o=s.attr("i");f(e,o);var i=e.parents(".form-group").next(".form-group").find("input"),r=i.attr("id"),l={};switch(r){case"vCardNum":l=0==o?i.validate("idNo"):i.validate("No");break;case"cardNum":l=0==o?i.validate("bankNo"):i.validate("No")}l.fail&&n(i,l.fail),d()};t.fn.modal=function(t){return this.on("tap",function(a){a.preventDefault(),u(this,t)}),o.on("swipeUp",v),o.on("swipeDown",h),l.on("tap",d),p.on("tap",m),e.focus(d),this}}(Zepto);