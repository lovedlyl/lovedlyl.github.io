<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="images/favicon.png"><title>第十七章 滚动监听</title><link rel="stylesheet" href="styles/bootstrap.css"><style>body{margin: 20px 0}</style><script src="scripts/bootstrap.js"></script></head><body class="col-xs-10 col-sm-10 col-md-10 col-lg-10 col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><div class="page-header"><h1 class="text-primary">Bootstrap 学习笔记</h1></div><div class="navbar navbar-inverse"><div class="navbar-header"><button class="btn btn-default navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-responsive-collapse"> <span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="collapse navbar-collapse navbar-responsive-collapse"><ul class="nav navbar-nav nav-pills"><li> <a href="index.html">首页</a></li><li> <a href="ch2.html">第二章</a></li><li> <a href="ch3.html">第三章</a></li><li> <a href="ch4.html">第四章</a></li><li> <a href="ch5.html">第五章</a></li><li> <a href="ch6.html">第六章</a></li><li> <a href="ch7.html">第七章</a></li><li> <a href="ch8.html">第八章</a></li><li> <a href="ch9.html">第九章</a></li><li> <a href="ch10.html">第十章</a></li><li> <a href="ch11.html">第十一章</a></li><li> <a href="ch12.html">第十二章</a></li><li> <a href="ch13.html">第十三章</a></li><li> <a href="ch14.html">第十四章</a></li><li> <a href="ch15.html">第十五章</a></li><li> <a href="ch16.html">第十六章</a></li><li> <a href="ch17.html">第十七章</a></li></ul></div></div><h2 class="text-primary">第十七章 滚动监听</h2><p class="lead">根据滚动条所处位置，自动更新导航项样式，对其高亮，下拉菜单也会高亮。<br><a class="text-info" href="scrollsply.html" target="_blank"> 演示页面</a></p><h3 class="text-primary">17.1 ID一致</h3><p>导航中链接的地址，需要对应被导航内容中的ID属性，比如</p><pre> &lt;a href="#home"&gt;主页	&lt;/a&gt;	
&lt;div id="home"&gt;...&lt;/div&gt;	</pre><p class="text-warning">不可见元素（jQuery中的not:visible）不会被监听，并且相对应的导航项目也不会高亮。</p><h3 class="text-primary">17.2 相对定位</h3><p>被监听的对象必须相对定位，并且设置高度，overflow设置为scroll：</p><pre> #scrollSpied{
	position: relative;
	height: ...;
	overflow: scroll
}</pre><h3 class="text-primary">17.3 data-属性调用</h3><p>为被调用元素设置<span class="text-warning">data-spy=scroll</span>属性，并且设置其<span class="text-warning">data-target</span>属性为对应导航<code>.nav</code>父元素的ID或class。</p><pre> &lt;div id="navbar-example" class="navbar navbar-default"&gt;
	&lt;div class="nav navbar-nav"&gt;
		........
	&lt;/div&gt;
&lt;/div&gt;
&lt;div data-scroll="spy," data-target="#navbar-example"&gt;
	......
&lt;/div&gt;	</pre><p>还可设置<span class="text-warning">data-offset</span>属性，指定距离被监听元素顶部多大距离时处于监听状态。比如data-offset="100"，
表示距离被距被监听元素顶部100px时，对应的导航项目高亮。</p><h3 class="text-primary">17.4 通过JS调用</h3><p>可以不设置被监听对象的上述所有data-属性，而是调用其方法scollspy：</p><pre>$("#scrollSpied").scrollsply({target: "#navbar-example"})</pre><p> <strong>刷新：</strong>当DOM中有元素添加或删除后，需要用下面方法刷新监听：<pre> $("[data-spy='scroll']").each(function(){
	var $spy = $(this);
	$spy.scrollsply("refresh");
	})</pre></p><p> <strong>	参数：</strong></p><table class="table table-bordered"><thead><tr> <td><strong>名称</strong></td><td><strong>类型</strong></td><td><strong>默认值</strong></td><td><strong>描述</strong></td></tr></thead><tbody> <tr> <td>offset </td><td>number</td><td>10</td><td>相当于属性调用中的data-offset</td></tr></tbody></table><p> <strong>事件：</strong></p><table class="table table-bordered"><thead><tr> <td><strong>事件类型</strong></td><td><strong>描述</strong></td><td><strong>注意</strong></td></tr></thead><tbody> <tr> <td>activate.bs-scrollspy</td><td>	$(".nav元素的父元素")，当被监听的各个项目被激活时执行</td><td class="text-warning">下拉菜单中的项目被激活时不执行</td></tr></tbody></table><pre> $("#navbar-example").on("activate.bs.scrollpy", function(){......})</pre><p class="text-info">在<strong><a href="scrollsply.html" target="_blank">演示页面</a></strong>打开控制台观察变化。</p><hr></body></html>